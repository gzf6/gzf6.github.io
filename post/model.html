<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!--响应式网站切记先添加视口meta标签，让设备以原生大小显示网页-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0,maximum-scale=1.0, user-scalable=no"/>
    <title>Little Plane</title>
    <link rel="stylesheet" href="../css/model.css">
    <link rel="icon" href="../img/favicon.ico">
    <script src="../js/main.js"></script>
    <script src="../js/plugin.js"></script>
    <!--生成文章目录的js-->
    <script src="http://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function(){
            $("h2,h3,h4,h5,h6").each(function(i,item){
                let tag = $(item).get(0).localName;
                $(item).attr("id","wow"+i);
                $("#category").append('<a class="new'+tag+'" href="#wow'+i+'">'+$(this).text()+'</a></br>');
                $(".newh2").css("margin-left",0);
                $(".newh3").css("margin-left",20);
                $(".newh4").css("margin-left",40);
                $(".newh5").css("margin-left",60);
                $(".newh6").css("margin-left",0);
            });
        });
    </script>
</head>
<body>
    <div id="left">
        <div class="index">
            <p>文章索引</p>
            <div>
                1. 客户端驱动的协商<br>
                2. 服务器驱动的协商<br>
                1. 内容协商首部集<br>
                2. 内容协商首部中的质量值<br>
                3. 随其他首部集而变化<br>
                4. Apache 中的内容协商<br>
                1. 使用 type-map 文件<br>
                2. 使用MultiView<br>
                5. 服务器端扩展<br>
                3. 透明协商<br>
                1. 进行缓存与备用候选<br>
                2. Vary 首部
            </div>
        </div>
        <div class="new">
            <p>最新文章</p>
        </div>
        <div class="archive">
            <p>文章归档</p>
        </div>
    </div>
    <div id="center">
        <div class="top">
            <nav>
                <a href="../index.html">HOME</a>
                <a href="../blog.html">BLOG</a>
                <a href="../#">RSS</a>
                <a href="../about.html">ABOUT</a>
            </nav>
            <form  class="search" action="../index.html" method="get" name="searchForm">
                <input type="search" name="search" placeholder="search...">
            </form>
        </div>
        <div class="middle">
            <div class="main">
                <h1  id="top">测试test</h1>
                <p class="date">2017.11.1</p>
                <div id="contentarea">
                    <div class="cell markdown-cell"><h2>1. ECMAScript的变量是松散类型的</h2>
                        <ul>
                            <li>松散类型变量：可以用来保存任何类型的数据。它只是一个用于保存值的占位符而已。即弱类型。</li>
                        </ul>
                    </div><div class="cell markdown-cell"><h2>2. ES6共有6种声明变量的方法</h2>
                    <ul>
                        <li>var、let、function、import、class、const（常量）</li>
                        <li>全局对象即最顶层的对象，在浏览器环境中指window对象。ES5中，全局对象的属性和全局变量是等价的。</li>
                        <li>ES6一方面保持兼容性，规定var和function声明的全局变量，依旧是全局对象的属性；另一方面规定，let、const、import、class命令声明的全局变量，不属于全局对象的属性。从ES6开始，全局变量将不再是全局对象的属性。</li>
                    </ul>
                </div><div class="cell markdown-cell"><h3>1. var</h3>
                    <ul>
                        <li>定义变量：var a ；此时未给a赋值，它保存着一个特殊的值——undefined；</li>
                        <li>初始化变量：var a = “hi”；若此时再写a=100；则a的值和类型都变了，但是不建议这样做；</li>
                        <li>可以使用一个var定义多个同类型或不同类型变量，用逗号分开即可，一般使用一个var声明多个变量。</li>
                        <li>var命令会发生”变量提升“现象，即变量可以在声明之前使用，值为undefined。这种现象多多少少是有些奇怪的，按照一般的逻辑，变量应该在声明语句之后才可以使用。</li>
                        <li>let的作用域是块，而var的作用域是函数。函数本身的作用域在其所在的块级作用域之内。</li>
                    </ul>
                </div><div class="cell markdown-cell"><h3>2. let</h3>
                    <p><strong>1. let命令：用来声明变量。它的用法类似于var，但是所声明的变量，只在let命令所在的代码块内有效。</strong></p>
                </div><div class="cell code-cell"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_lparen">{</span>
                </div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_storage ace_type">let</span> <span class="ace_identifier">a</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_numeric">10</span><span class="ace_punctuation ace_operator">;</span>
                </div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_storage ace_type">var</span> <span class="ace_identifier">b</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_numeric">1</span><span class="ace_punctuation ace_operator">;</span>
                </div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
                </div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">a</span> <span class="ace_comment">// ReferenceError: a is not defined.</span>
                </div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">b</span> <span class="ace_comment">// 1</span>
                </div></div></div></div><div class="cell markdown-cell"><p><strong>2. 为了纠正var命令的”变量提升“现象，let命令改变了语法行为，它所声明的变量一定要在声明后使用，否则报错。</strong></p>
                    <p><strong>3. 暂时性死区</strong></p>
                    <ol>
                        <li>只要块级作用域内存在let命令，它所声明的变量就“绑定”（binding）这个区域，不再受外部的影响。</li>
                    </ol>
                </div><div class="cell code-cell"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">var</span> <span class="ace_identifier">tmp</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_numeric">123</span><span class="ace_punctuation ace_operator">;</span>
                </div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">if</span> <span class="ace_paren ace_lparen">(</span><span class="ace_constant ace_language ace_boolean">true</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span>
                </div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">tmp</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_string">'abc'</span><span class="ace_punctuation ace_operator">;</span> <span class="ace_comment">// ReferenceError</span>
                </div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_storage ace_type">let</span> <span class="ace_identifier">tmp</span><span class="ace_punctuation ace_operator">;</span>
                </div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
                </div></div></div></div><div class="cell markdown-cell"><p>上面代码中，存在全局变量tmp，但是块级作用域内let又声明了一个局部变量tmp，导致后者绑定这个块级作用域，所以在let声明变量前，对tmp赋值会报错。<br>
                    ES6明确规定，如果区块中存在let和const命令，这个区块对这些命令声明的变量，从一开始就形成了封闭作用域。凡是在声明之前就使用这些变量，就会报错。<br>
                    总之，在代码块内，使用let命令声明变量之前，该变量都是不可用的。这在语法上，称为“暂时性死区”（temporal dead zone，简称 TDZ）。</p>
                </div><div class="cell markdown-cell"><ol start="2">
                    <li>“暂时性死区”也意味着typeof不再是一个百分之百安全的操作。</li>
                </ol>
                </div><div class="cell code-cell"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">typeof</span> <span class="ace_identifier">x</span><span class="ace_punctuation ace_operator">;</span> <span class="ace_comment">// ReferenceError</span>
                </div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">x</span><span class="ace_punctuation ace_operator">;</span>
                </div></div></div></div><div class="cell markdown-cell"><p>上面代码中，变量x使用let命令声明，所以在声明之前，都属于x的“死区”，只要用到该变量就会报错。因此，typeof运行时就会抛出一个ReferenceError。<br>
                    作为比较，如果一个变量根本没有被声明，使用typeof反而不会报错。</p>
                </div><div class="cell code-cell"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">typeof</span> <span class="ace_identifier">undeclared_variable</span> <span class="ace_comment">// "undefined"</span>
                </div></div></div></div><div class="cell markdown-cell"><p>上面代码中，undeclared_variable是一个不存在的变量名，结果返回“undefined”。所以，在没有let之前，typeof运算符是百分之百安全的，永远不会报错。现在这一点不成立了。这样的设计是为了让大家养成良好的编程习惯，变量一定要在声明之后使用，否则就报错。</p>
                </div><div class="cell markdown-cell"><ol start="3">
                    <li>有些“死区”比较隐蔽，不太容易发现。</li>
                </ol>
                </div><div class="cell code-cell"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">function</span> <span class="ace_entity ace_name ace_function">bar</span><span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter">x</span><span class="ace_punctuation ace_operator"> </span><span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">y</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_identifier">y</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_numeric">2</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span>
                </div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword">return</span> <span class="ace_paren ace_lparen">[</span><span class="ace_identifier">x</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_identifier">y</span><span class="ace_paren ace_rparen">]</span><span class="ace_punctuation ace_operator">;</span>
                </div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
                </div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">bar</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span> <span class="ace_comment">// <span class="ace_cjk" style="width:NaNpx">报</span><span class="ace_cjk" style="width:NaNpx">错</span></span>
                </div></div></div></div><div class="cell markdown-cell"><p>上面代码中，调用bar函数之所以报错（某些实现可能不报错），是因为参数x默认值等于另一个参数y，而此时y还没有声明，属于”死区“。如果y的默认值是x，就不会报错，因为此时x已经声明了。</p>
                </div><div class="cell code-cell"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">function</span> <span class="ace_entity ace_name ace_function">bar</span><span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter">x</span><span class="ace_punctuation ace_operator"> </span><span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_numeric">2</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_identifier">y</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">x</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span>
                </div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_keyword">return</span> <span class="ace_paren ace_lparen">[</span><span class="ace_identifier">x</span><span class="ace_punctuation ace_operator">,</span> <span class="ace_identifier">y</span><span class="ace_paren ace_rparen">]</span><span class="ace_punctuation ace_operator">;</span>
                </div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
                </div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">bar</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span> <span class="ace_comment">// [2, 2]</span>
                </div></div></div></div><div class="cell markdown-cell"><p>另外，下面的代码也会报错，与var的行为不同。</p>
                </div><div class="cell code-cell"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">// <span class="ace_cjk" style="width:NaNpx">不</span><span class="ace_cjk" style="width:NaNpx">报</span><span class="ace_cjk" style="width:NaNpx">错</span></span>
                </div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">var</span> <span class="ace_identifier">x</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">x</span><span class="ace_punctuation ace_operator">;</span>
                </div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">// <span class="ace_cjk" style="width:NaNpx">报</span><span class="ace_cjk" style="width:NaNpx">错</span></span>
                </div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">x</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">x</span><span class="ace_punctuation ace_operator">;</span> <span class="ace_comment">// ReferenceError: x is not defined</span>
                </div></div></div></div><div class="cell markdown-cell"><p>上面代码报错，也是因为暂时性死区。使用let声明变量时，只要变量在还没有声明完成前使用，就会报错。上面这行就属于这个情况，在变量x的声明语句还没有执行完成前（分号结束才算完成），就去取x的值，导致报错“x 未定义”。</p>
                </div><div class="cell markdown-cell"><p><strong>4. 不允许重复声明</strong></p>
                    <ol>
                        <li>let不允许在相同作用域内，重复声明同一个变量。</li>
                    </ol>
                </div><div class="cell code-cell"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">// <span class="ace_cjk" style="width:NaNpx">报</span><span class="ace_cjk" style="width:NaNpx">错</span></span>
                </div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">function</span> <span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span>
                </div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_storage ace_type">let</span> <span class="ace_identifier">a</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_numeric">10</span><span class="ace_punctuation ace_operator">;</span>
                </div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_storage ace_type">var</span> <span class="ace_identifier">a</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_numeric">1</span><span class="ace_punctuation ace_operator">;</span>
                </div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
                </div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">// <span class="ace_cjk" style="width:NaNpx">报</span><span class="ace_cjk" style="width:NaNpx">错</span></span>
                </div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">function</span> <span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span>
                </div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_storage ace_type">let</span> <span class="ace_identifier">a</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_numeric">10</span><span class="ace_punctuation ace_operator">;</span>
                </div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_storage ace_type">let</span> <span class="ace_identifier">a</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_numeric">1</span><span class="ace_punctuation ace_operator">;</span>
                </div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
                </div></div></div></div><div class="cell markdown-cell"><ol start="2">
                    <li>因此，不能在函数内部重新声明参数。</li>
                </ol>
                </div><div class="cell code-cell"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">function</span> <span class="ace_entity ace_name ace_function">func</span><span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter">arg</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span>
                </div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_storage ace_type">let</span> <span class="ace_identifier">arg</span><span class="ace_punctuation ace_operator">;</span> <span class="ace_comment">// <span class="ace_cjk" style="width:NaNpx">报</span><span class="ace_cjk" style="width:NaNpx">错</span></span>
                </div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
                </div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">function</span> <span class="ace_entity ace_name ace_function">func</span><span class="ace_paren ace_lparen">(</span><span class="ace_variable ace_parameter">arg</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span>
                </div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_paren ace_lparen">{</span>
                </div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_storage ace_type">let</span> <span class="ace_identifier">arg</span><span class="ace_punctuation ace_operator">;</span> <span class="ace_comment">// <span class="ace_cjk" style="width:NaNpx">不</span><span class="ace_cjk" style="width:NaNpx">报</span><span class="ace_cjk" style="width:NaNpx">错</span></span>
                </div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_paren ace_rparen">}</span>
                </div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
                </div></div></div></div><div class="cell markdown-cell"><p><strong>5. for循环的计数器，就很合适使用let命令。</strong></p>
                </div><div class="cell code-cell"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">for</span> <span class="ace_paren ace_lparen">(</span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">i</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_numeric">0</span><span class="ace_punctuation ace_operator">;</span> <span class="ace_identifier">i</span> <span class="ace_keyword ace_operator">&lt;</span> <span class="ace_constant ace_numeric">10</span><span class="ace_punctuation ace_operator">;</span> <span class="ace_identifier">i</span><span class="ace_keyword ace_operator">++</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span><span class="ace_paren ace_rparen">}</span>
                </div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">console</span><span class="ace_punctuation ace_operator">.</span><span class="ace_support ace_function ace_firebug">log</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">i</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span> <span class="ace_comment">//ReferenceError: i is not defined</span>
                </div></div></div></div><div class="cell markdown-cell"><p>下面的代码如果使用var，最后输出的是10。</p>
                </div><div class="cell code-cell"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">var</span> <span class="ace_identifier">a</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_paren ace_lparen">[</span><span class="ace_paren ace_rparen">]</span><span class="ace_punctuation ace_operator">;</span>
                </div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">for</span> <span class="ace_paren ace_lparen">(</span><span class="ace_storage ace_type">var</span> <span class="ace_identifier">i</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_numeric">0</span><span class="ace_punctuation ace_operator">;</span> <span class="ace_identifier">i</span> <span class="ace_keyword ace_operator">&lt;</span> <span class="ace_constant ace_numeric">10</span><span class="ace_punctuation ace_operator">;</span> <span class="ace_identifier">i</span><span class="ace_keyword ace_operator">++</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span>
                </div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">a</span><span class="ace_paren ace_lparen">[</span><span class="ace_identifier">i</span><span class="ace_paren ace_rparen">]</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_storage ace_type">function</span> <span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span>
                </div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_storage ace_type">console</span><span class="ace_punctuation ace_operator">.</span><span class="ace_support ace_function ace_firebug">log</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">i</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
                </div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_paren ace_rparen">}</span><span class="ace_punctuation ace_operator">;</span>
                </div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
                </div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">a</span><span class="ace_paren ace_lparen">[</span><span class="ace_constant ace_numeric">6</span><span class="ace_paren ace_rparen">]</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span> <span class="ace_comment">// 10</span>
                </div></div></div></div><div class="cell markdown-cell"><p>上面代码中，变量i是var声明的，在全局范围内都有效，所以全局只有一个变量i。每一次循环，变量i的值都会发生改变，而循环内被赋给数组a的function在运行时，会通过闭包读到这同一个变量i，导致最后输出的是最后一轮的i的值，也就是10。</p>
                    <p>而如果使用let，声明的变量仅在块级作用域内有效，最后输出的是6。</p>
                </div><div class="cell code-cell"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_storage ace_type">var</span> <span class="ace_identifier">a</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_paren ace_lparen">[</span><span class="ace_paren ace_rparen">]</span><span class="ace_punctuation ace_operator">;</span>
                </div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">for</span> <span class="ace_paren ace_lparen">(</span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">i</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_numeric">0</span><span class="ace_punctuation ace_operator">;</span> <span class="ace_identifier">i</span> <span class="ace_keyword ace_operator">&lt;</span> <span class="ace_constant ace_numeric">10</span><span class="ace_punctuation ace_operator">;</span> <span class="ace_identifier">i</span><span class="ace_keyword ace_operator">++</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span>
                </div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_identifier">a</span><span class="ace_paren ace_lparen">[</span><span class="ace_identifier">i</span><span class="ace_paren ace_rparen">]</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_storage ace_type">function</span> <span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span>
                </div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_storage ace_type">console</span><span class="ace_punctuation ace_operator">.</span><span class="ace_support ace_function ace_firebug">log</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">i</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
                </div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>    <span class="ace_paren ace_rparen">}</span><span class="ace_punctuation ace_operator">;</span>
                </div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
                </div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">a</span><span class="ace_paren ace_lparen">[</span><span class="ace_constant ace_numeric">6</span><span class="ace_paren ace_rparen">]</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span> <span class="ace_comment">// 6</span>
                </div></div></div></div><div class="cell markdown-cell"><p>上面代码中，变量i是let声明的，当前的i只在本轮循环有效，所以每一次循环的i其实都是一个新的变量，所以最后输出的是6。你可能会问，如果每一轮循环的变量i都是重新声明的，那它怎么知道上一轮循环的值，从而计算出本轮循环的值？这是因为 JavaScript 引擎内部会记住上一轮循环的值，初始化本轮的变量i时，就在上一轮循环的基础上进行计算。</p>
                    <p>另外，for循环还有一个特别之处，就是循环语句部分是一个父作用域，而循环体内部是一个单独的子作用域。</p>
                </div><div class="cell code-cell"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">for</span> <span class="ace_paren ace_lparen">(</span><span class="ace_storage ace_type">let</span> <span class="ace_identifier">i</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_constant ace_numeric">0</span><span class="ace_punctuation ace_operator">;</span> <span class="ace_identifier">i</span> <span class="ace_keyword ace_operator">&lt;</span> <span class="ace_constant ace_numeric">3</span><span class="ace_punctuation ace_operator">;</span> <span class="ace_identifier">i</span><span class="ace_keyword ace_operator">++</span><span class="ace_paren ace_rparen">)</span> <span class="ace_paren ace_lparen">{</span>
                </div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_storage ace_type">let</span> <span class="ace_identifier">i</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_string">'abc'</span><span class="ace_punctuation ace_operator">;</span>
                </div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>  <span class="ace_storage ace_type">console</span><span class="ace_punctuation ace_operator">.</span><span class="ace_support ace_function ace_firebug">log</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">i</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span>
                </div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
                </div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">// abc</span>
                </div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">// abc</span>
                </div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">// abc</span>
                </div></div></div></div><div class="cell markdown-cell"><p>上面代码输出了3次abc，这表明函数内部的变量i和外部的变量i是分离的。</p>
                </div>
                </div>
            </div>
        </div>
        <div class="bottom">©2017-2017 Guan Zifei. All Rights Reserved.</div>
    </div>
    <div id="right">
        <div class="content">
            <p>本文目录</p>
            <div id="category"></div>
        </div>
        <div class="comment">
            <p>本文评论</p>
        </div>
    </div>
    <a class="totop" href="#top"><img src="../img/totop.png" alt="flayaway" title="TOP"></a>
</body>
</html>